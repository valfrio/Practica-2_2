{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Pr\u00e1ctica 2.2","text":""},{"location":"#1-introduccion-y-paquetes-necesarios","title":"1. Introducci\u00f3n y paquetes necesarios","text":"<p>Para empezar debemos comprobar que tenemos OpenSSL instalado para poder cifrar las contrase\u00f1as. Para ello usamos el comando  dpkg  -l  |  grep  openssl</p> <p></p>"},{"location":"#2-creacion-de-usuarios-y-contrasenas-de-acceso-web","title":"2. Creaci\u00f3n de usuarios y contrase\u00f1as de acceso web","text":"<p>Ahora crearemos los dos usuarios con sus dos contrase\u00f1as. Para ello crearemos el archivo /etc/nginx/.htpasswd , donde ahora copiaremos en el archivo el usuario y las contrase\u00f1as. Para ello har\u00e9 sudo  sh  -c  \"echo -n 'Salva:' &gt;&gt; /etc/nginx/.htpasswd\" y sudo  sh  -c  \"openssl passwd -apr1 &gt;&gt; /etc/nginx/.htpasswd\"</p> <p></p> <p></p> <p></p>"},{"location":"#3-configuracion-de-nginx-para-autentificacion-basica","title":"3. Configuraci\u00f3n de Nginx para autentificaci\u00f3n b\u00e1sica","text":"<p>Para la autentificaci\u00f3n debemos primero de restringir el paso a todos los usuarios que no se identifiquen. Lo primero para hacer esto es a\u00f1adir en el archivo de configuraci\u00f3n de site-available las siguientes dos lineas a location</p> <pre><code>auth_basic  \"\u00c1rea restringida\";\nauth_basic_user_file  /etc/nginx/.htpasswd;\n</code></pre> <p>Despu\u00e9s debemos de reiniciar el servicio para que los cambios se hagan efectivos. Despu\u00e9s debemos de ver que cuando intentamos entrar con un usuario no nos permite entrar. </p> <p></p> <p>Al intentar autentificarse de nuevo con un usuario que si es v\u00e1lido nso saldr\u00e1 el men\u00fa como antes. Si hemos entrado ya con ese usuario guardar\u00e1 la contrase\u00f1a.</p> <p></p> <p>Podemos ver en los registros que quedan registrados los dos accesos.</p> <p>Acceso denegado:</p> <p></p> <p>Acceso permitido:</p> <p></p>"},{"location":"#autentificacion-en-contactohtml","title":"Autentificaci\u00f3n en contacto.html","text":""},{"location":"#4-autentificacion-basica-con-restriccion-por-acceso-por-ip","title":"4. Autentificaci\u00f3n b\u00e1sica con restricci\u00f3n por acceso por IP","text":""},{"location":"#41-denegar-una-ip","title":"4.1 Denegar una IP","text":"<p>Para ello debemos de a\u00f1adir en location deny ip, siendo ip la ip que quieres denegar. Yo le puse la ip de la maquina f\u00edsica y al intentar entrar, ni me pidi\u00f3 la contrase\u00f1a:</p> <p></p>"},{"location":"#42-permitir","title":"4.2 Permitir","text":"<p>Para ello solo debemos de poner allow delante da la ip, de forma que no nos pedir\u00e1 entrar con esa ip.</p> <p></p> <p>Ahora si me permite entrar</p> <p></p>"},{"location":"#43-satisfy-all-o-any","title":"4.3 Satisfy all o any","text":"<p>Para ello debemos de colocar arriba satisfy all o satisfy any. Si ponemos satisfy all, un usuario debe de cumplir que la ip sea la permitida y adem\u00e1s que las ceredenciales sean validas. </p> <p></p> <p>Al intentar entrar con esa credencial no me lo permiti\u00f3. Por otro lado, al poner satisfy any el usuario solo debe de satisfacer 1 de las dos. De esta forma, al intentar entrar no me ha pedido credenciales dado que mi ip estaba permitida.</p> <p></p>"},{"location":"#5-cuestiones","title":"5. Cuestiones","text":""},{"location":"#51-cuestion-1","title":"5.1 Cuesti\u00f3n 1","text":"<p>Supongamos que yo soy el cliente con la IP 172.1.10.15 e intento acceder al directorio web_muy_guay de mi sitio web, equivoc\u00e1ndome al poner el usuario y contrase\u00f1a. \u00bfPodr\u00e9 acceder?\u00bfPor qu\u00e9?</p> <p>No podr\u00e1 acceder ya que el satisfy all le obliga a cumplir todos los requisitos, habiendo fallado la autentificaci\u00f3n</p>"},{"location":"#52-cuestion-2","title":"5.2 Cuesti\u00f3n 2","text":"<p>ask \"Cuesti\u00f3n 1\" Supongamos que yo soy el cliente con la IP 172.1.10.15 e intento acceder al directorio web_muy_guay de mi sitio web, introduciendo correctamente usuario y contrase\u00f1a. \u00bfPodr\u00e9 acceder?\u00bfPor qu\u00e9?</p> <p>Al contrario que en el caso anterior, cumple ambos requisitos por lo que podr\u00eda acceder.</p>"},{"location":"#53-cuestion-3","title":"5.3 Cuesti\u00f3n 3","text":"<p>Supongamos que yo soy el cliente con la IP 172.1.10.15 e intento acceder al directorio web_muy_guay de mi sitio web, introduciendo correctamente usuario y contrase\u00f1a. \u00bfPodr\u00e9 acceder?\u00bfPor qu\u00e9?</p> <p>Podr\u00e1 dado que el satisfy any obliga a cumplir 1 al menos, y nuestro usuario cumple la de las credenciales.</p>"},{"location":"#54-cuestion-4","title":"5.4 Cuesti\u00f3n 4","text":"<p>A lo mejor no sab\u00e9is que tengo una web para documentar todas mis excursiones espaciales con Jeff, es esta: Jeff Bezos y yo</p> <p>Supongamos que quiero restringir el acceso al directorio de proyectos porque es muy secreto, eso quiere decir a\u00f1adir autenticaci\u00f3n b\u00e1sica a la URL:Proyectos</p> <p>Completa la configuraci\u00f3n para conseguirlo:</p> <pre><code>server {\n    listen 80;\n    listen [::]:80;\n    root /var/www/freewebsitetemplates.com/preview/space-science;\n    index index.html index.htm index.nginx-debian.html;\n    server_name freewebsitetemplates.com www.freewebsitetemplates.com;\n\n    location   /          {\n        try_files $uri $uri/ =404;\n    }\n\n    location  /Proyectos/ {\n        auth_basic \"Restricted Area\";\n        auth_basic_user_file conf/htpasswd;\n\n        try_files $uri $uri/ =404;\n    }\n}\n\n</code></pre>"}]}